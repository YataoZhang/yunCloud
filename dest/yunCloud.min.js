/*! yunCloud 2016-04-20 */
!function(a){"use strict";var b=b,c=c;if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a());else{var d;"undefined"!=typeof window?d=window:"undefined"!=typeof b?d=b:"undefined"!=typeof c&&(d=c),d.yunCloud=a()}}(function(){"use strict";var a=function(){var a={"&lt;":"<","&gt;":">","&nbsp;":" ","&quot;":'"',"&amp;":"&"},c={"&":"&amp;","<":"&lt",">":"&gt;"," ":"&nbsp;",'"':"&quot;"},d=function(b,d){var f=function(a,b){d=d.replace(new RegExp(a,"g"),b)};return"encode"===b?e.forIn(c,f):e.forIn(a,f),d},e={noop:function(a){return a||""},forIn:function(a,b){for(var c in a)a.hasOwnProperty(c)&&b.call(null,c,a[c])},matchReg:/^([\S\s]+?)(|\|([\S\s]+))$/,convert:/<%-([\S\s]+?)%>/g,val:/<%&([\S\s]+?)%>/g,origin:/<%=([\S\s]+?)%>/g,expression:/<%([\s\S]+?)%>/g,render:function(a,c){var d="";c&&(d="data.");var f=a.replace(/\n/g,"\\n").replace(/\'/g,"\\'");e.convert.test(a)&&(f=f.replace(e.convert,function(a,b){return'\' + transfer("encode",'+d+b+") + '"})),e.val.test(a)&&(f=f.replace(e.val,function(a,b){return"'+ "+b+"+'"})),e.origin.test(a)&&(f=f.replace(e.origin,function(a,c){if(c=d+c,/\|/.test(c=c.trim())){var f=c.match(e.matchReg);return"'+ ("+(b[f[3]]||e.noop).toString()+")("+f[1]+") +'"}return"'+"+c+"+'"})),e.expression.test(a)&&(f=f.replace(e.expression,function(a,b){return"');\n"+b+"\ntpl.push('"})),f=f.replace(/\'\n/g,"'").replace(/\n\'/gm,"'"),f="tpl.push('"+f+"');",f=f.replace(/tpl.push\((''|'[\\n\s]+)'\);/g,""),f=c?"var tpl=[];"+f+"\nreturn tpl.join('');":"var tpl=[];\nwith(obj||{}){\n"+f+"\n}\nreturn tpl.join('');";var g=c?"data":"obj";return new Function(g,"transfer",f)}},f=function(){this.map={}};f.prototype.set=function(a,b,c){(this.map[a]||(this.map[a]={}))[b]=c},f.prototype.get=function(a){return this.map[a]||{}};var g=new f;return{isCache:!0,template:function(a,b){var c=null;return this.isCache?(c=g.get(a.length)[a],c||(c=e.render(a,b),g.set(a.length,a,c))):c=e.render(a,b),function(a){return c(a,d)}}}}(),b={},c=function(b,c,d){return 1===arguments.length?a.template(b):a.template(b,d)(c)};return c.register=function(a,c){b[a]=c},c.unRegister=function(a){delete b[a]},c.setCache=function(b){a.isCache=!!b},c});